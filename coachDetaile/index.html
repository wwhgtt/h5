<!DOCTYPE>
<html>
	<head>
		<title>助驾帮-超级教练</title>
		<meta charset="utf-8"/>
		<meta Content-Type="application/x-www-form-urlencoded" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
		<link rel="stylesheet" type="text/css" href="./css/style.css">
		<script src="./js/lib/zetpo.min.js"></script>
		<script src="./js/lib/moment.js"></script>
		<script src="./js/script/config.js"></script>
		<script src="./js/script/weixin.js"></script>
	</head>
	<body style="margin:0px" >
		<div id="body">
			<div class="container forHideEvent" style="background-color:white;margin-bottom:60px">
			<img src="./img/banner640.png" style="width:100%">
			<div class="coachTemp " style="margin-top:-40px;position:absolute;width:100%">
				<div class="forBorder" style="width:80px;border:2px solid white;border-radius:40px;float:left;margin-left:1.5em;">
					<img class="coachAvator" src="" style="width:100%;border-radius:40px">
				</div>
				<div class="header-line" style="width:100px;margin-left:100px;padding-top:12px" >
					<span style="color:white;margin-left:1em" class="coachNameTemp"></span>
					<span style="margin-left:8px"><img src="" class="coachIMAgeTemp" style="width:10px" /></span>
					<br>
					<span style="margin-left:8px"><img src="" class="checkImg" style="width:80px;margin-top:15px;margin-left:5px" /></span>
				</div>
				<a href="" class="coachPhoneTEl" style="margin-right:1.5em"><img src="./img/icon_phone.png" style="float:right;margin-top:-20px;width:60px"></a>
			</div>
			<div class="clear"></div>
			<div class="kongbai" style="height:20px;background-color:#ededed;width:100%;margin-top:60px"></div>
			<div class="item item-avatar myArrayNative" style="padding-left:5%;padding-bottom:15px;border-bottom:1px solid #f2f2f4" >
				<p style="margin-bottom:10px;color:#666666">教学特色</p>
				<span style="background-color:#3398cc" class="coachItemFirst"></span><span style="background-color:#65cc33" class="coachItemSecond"></span><span style="background-color:#ffcc33" class="coachItemThird"></span>
				<p style="color:#cccccc;display:none" class="firstTemp"></p>
			</div>
			<div class="item item-avatar  forCarIMG" style="padding-left:5%;padding-bottom:15px;border-bottom:1px solid #f2f2f4" >
				<p style="margin-bottom:10px;color:#666666">车辆照片</p>
				<img class="coachItemFirstIMG" src=""><img class="coachItemSecondIMG" src=""><img class="coachItemThirdIMG" src=""><img class="coachItemFourthIMG"  src="">
				<p style="color:#cccccc;display:none" class="secondTemp"></p>
			</div>
			<div class="item item-avatar forCarIMG" style="padding-left:5%;padding-bottom:15px;border-bottom:1px solid #f2f2f4" >
				<p style="margin-bottom:10px;color:#666666">场地照片</p>
				<img class="coachFirstimg" src=""><img class="coachSecondimg" src=""><img class="coachThirdimg" src=""><img class="coachFourthimg" src="">
				<p style="color:#cccccc;display:none" class="thirdTemp"></p>
			</div>
			<div class="kongbai" style="height:20px;background-color:#ededed;width:100%;"></div>
			<div class="item item-avatar coachItem coachIntroduce" style="padding-left:5%;height:auto;border-bottom:1px solid #f2f2f4" >
				<span style="color:#666666">所属驾校</span><span style="padding-left:24px;"><strong class="DrivingSchool"></strong></span>
			</div>
			<div class="item item-avatar coachItem coachIntroduce" style="padding-left:5%;height:auto;border-bottom:1px solid #f2f2f4" >
				<span style="color:#666666">教学模式</span><span style="padding-left:24px;"><strong class="TeachType"></strong></span>
			</div>
			<div class="item item-avatar coachItem coachIntroduce" style="padding-left:5%;height:auto;border-bottom:1px solid #f2f2f4" >
				<span style="color:#666666">练车场地</span><span style="padding-left:24px;"><strong class="TeachSite"></strong></span>
			</div>
			<div class="item item-avatar coachItem coachIntroduce" style="padding-left:5%;height:auto;border-bottom:1px solid #f2f2f4" >
				<span style="color:#666666">最新价格</span><span style="padding-left:24px;"><strong class="Price"></strong></span>
			</div>
			<div class="item item-avatar coachItem coachIntroduce" style="padding-left:5%;height:auto;border-bottom:1px solid #f2f2f4" >
				<span style="display:inline-block;color:#666666">个人简介</span><span style="display:inline-block"><strong style="padding-left:24px;font-weight:600" class="Introduction"></strong></span>
			</div>
			<div class="footerr"></div>
				<a href="tel:02864897280" class="state" style="display:inline-block"><button class="footButton">我要咨询</button></a>
				<a href="http://e.eqxiu.com/s/p00JHE7B" class="state" style="display:inline-block"><button class="footButton" style="left:50%">我要制作</button></a>
			</div>
		</div>
		<div class="container-model" style="display:none">
			<img src="" class="hideImage" />
		</div>
	</body>
</html>
<script type="text/javascript">
	$(document).ready(function(){
		var getQueryStr=function(id){
			var reg = new RegExp("(^|&)" + id + "=([^&]*)(&|$)", "i");
		    var r = window.location.search.replace(/\?/g, "&").substr(1).match(reg);
		    if (r != null){
		    	return (r[2]);
		    }else{
		    	return null;
		    } 
		}
		var coachId=getQueryStr("id");
		var getQueryStr=function(state){
			var reg = new RegExp("(^|&)" + state + "=([^&]*)(&|$)", "i");
		    var r = window.location.search.replace(/\?/g, "&").substr(1).match(reg);
		    if (r != null){
		    	return (r[2]);
		    }else{
		    	return null;
		    } 
		}
		var state=getQueryStr("state");
		if(state == "" || state == null || state == undefined){
			//适用于分享
		}else{
			//适用于教练名片
			$(".state").css("display","none");
			$(".footerr").css("display","none");
		}
		$.post(BASE_URL+"/helpdrv/getcoach/",{
			coachid:coachId
		},function(data){
			var result=JSON.parse(data);
			if(result && result.result == true){
				var coach=result.coach;
				if(!coach.Avator){
					$(".coachAvator").attr("src","http://party.idrv.com.cn/coachDetaile/img/no.jpg");
				}else{
					$(".coachAvator").attr("src",coach.Avator+"_large?time="+new Date().getTime());
				}
				
				var sex=coach.Sex;
				if(sex == 1){
					$(".coachIMAgeTemp").attr("src","http://party.idrv.com.cn/coachDetaile/img/icon_man.png");
				}else{
					$(".coachIMAgeTemp").attr("src","http://party.idrv.com.cn/coachDetaile/img/icon_woman.png");
				}
				var status=coach.Status;
				if(status == 2){
					$(".checkImg").attr("src","http://party.idrv.com.cn/coachDetaile/img/renzheng.png");
				}else{
					$(".checkImg").css("display","none");
				}
				if(coach.Phone !== null && coach.Phone !== "" && coach.Phone !== undefined){
					var phone=coach.Phone;
					$(".coachPhoneTEl").css("display","block");
					$(".coachPhoneTEl").attr("href","tel:"+phone);
				}
				$(".coachNameTemp").html(coach.Name);
				var TeachCharacteristics =coach.TeachCharacteristics;
				var modelArray=["定点接送","不吸烟","一费制","分期付款","一人一车","计时收费"];
				var myArray=[];
				var realMyArray=[];
				myArray=TeachCharacteristics.split("-");
				var index = 1 ;
				if(!TeachCharacteristics){
					$(".firstTemp").css("display","block");
					$(".firstTemp").html("这个教练很懒,都没有写教学特色");
					$(".coachItemFirst").css("display","none");
					$(".coachItemSecond").css("display","none");
					$(".coachItemThird").css("display","none");
				}else{
					if(myArray.indexOf("true") !== -1){
						for(var i=0;i<=myArray.length;i++){
							if(myArray[i] == "true"){ realMyArray[index] = modelArray[i-1]; index ++;}
						}
						if(!realMyArray[1]){
							// console.log(myArray[1])
							$(".coachItemFirst").css("display","none");
						}else{
							$(".coachItemFirst").html(realMyArray[1]);
						}
						if(!realMyArray[2]){
							$(".coachItemSecond").css("display","none");
						}else{
							$(".coachItemSecond").html(realMyArray[2]);
						}
						if(!realMyArray[3]){
							$(".coachItemThird").css("display","none");
						}else{
							$(".coachItemThird").html(realMyArray[3]);
						}
					}else{
						if(!myArray[1]){
							$(".coachItemFirst").css("display","none");
						}else{
							$(".coachItemFirst").html(myArray[1]);
						}
						if(!myArray[2]){
							$(".coachItemSecond").css("display","none");
						}else{
							$(".coachItemSecond").html(myArray[2]);
						}
						if(!myArray[3]){
							$(".coachItemThird").css("display","none");
						}else{
							$(".coachItemThird").html(myArray[3]);
						}
					}
				}
				var Carpics=[];
				var Carpics=coach.Carpics;
				if(Carpics !== "" && Carpics !== null && Carpics !== undefined){
					if(Carpics[0]){
						$(".coachItemFirstIMG").css("display","inline-block");
						$(".coachItemFirstIMG").attr("src",Carpics[0]);
					}
					if(Carpics[1]){
						$(".coachItemSecondIMG").css("display","inline-block");
						$(".coachItemSecondIMG").attr("src",Carpics[1]);
					}
					if(Carpics[2]){
						$(".coachItemThirdIMG").css("display","inline-block");
						$(".coachItemThirdIMG").attr("src",Carpics[2]);
					}
					if(Carpics[3]){
						$(".coachItemFourthIMG").css("display","inline-block");
						$(".coachItemFourthIMG").attr("src",Carpics[3]);
					}
				}else{
					$(".secondTemp").css("display","block");
					$(".secondTemp").html("这个教练很懒,一张车辆照片都没传")
				}
				
				var Sitepics=[];
				var Sitepics=coach.Sitepics;
				if(Sitepics !== "" && Sitepics !== null && Sitepics !== undefined){
					if(Sitepics[0]){
						$(".coachFirstimg").css("display","inline-block");
						$(".coachFirstimg").attr("src",Sitepics[0]);
					}
					if(Sitepics[1]){
						$(".coachSecondimg").css("display","inline-block");
						$(".coachSecondimg").attr("src",Sitepics[1]);
					}
					if(Sitepics[2]){
						$(".coachThirdimg").css("display","inline-block");
						$(".coachThirdimg").attr("src",Sitepics[2]);
					}
					if(Sitepics[3]){
						$(".coachFourthimg").css("display","inline-block");
						$(".coachFourthimg").attr("src",Sitepics[3]);
					}
				}else{
					$(".thirdTemp").css("display","block");
					$(".thirdTemp").html("这个教练很懒,一张场地照片都没传")
				}
				
				if(coach.TeachType == "1"){
					$(".TeachType").html("一车多人");
				}else if(coach.TeachType == "2"){
					$(".TeachType").html("一车一人");
				}

				$(".DrivingSchool").html(coach.DrivingSchool);
				var TeachSite=coach.TeachSite;
				if(TeachSite !== "cdyjwlkjyxzrgs"){
					$(".TeachSite").html(coach.TeachSite);
				}
				$(".Price").html("￥"+coach.Price);
				var Introduction=coach.Introduction;
				if(Introduction !== "cdyjwlkjyxzrgs"){
					$(".Introduction").html(coach.Introduction);
				}
				var url=location.href.split("#")[0];
				$.post("/helpdrv/wxgetsignature/",{
					url:url
				},function(data){
					var result=JSON.parse(data);
					if(result && result.result == true ){
						var timestamp=result.timestamp,
							nonceStr=result.noncestr,
							signature=result.signature;
						wx.config({
						    debug: false, 
						    appId: 'wx8bbeb53d26dbe214', 
						    timestamp:timestamp, 
						    nonceStr: nonceStr,
						    signature:signature,
						    jsApiList: [
						    	"onMenuShareTimeline",
						    	"onMenuShareAppMessage"
						    ] 
						});
						wx.ready(function(){
							wx.onMenuShareTimeline({
						        title: '推荐我的驾校教练——'+coach.Name, // 分享标题
							    link: 'http://party.idrv.com.cn/coachDetaile?id='+coachId, // 分享链接  寻找教练webview
							    imgUrl: coach.Avator+"_large?time="+new Date().getTime(), // 分享图标
						        success: function () { 
						            // $window.location.href="/yja/person";
						        },
						        cancel: function () { 
						            // 用户取消分享后执行的回调函数
						        }
						    });
						    wx.onMenuShareAppMessage({
						        title: '推荐我的驾校教练——'+coach.Name, // 分享标题
							    link: 'http://party.idrv.com.cn/coachDetaile?id='+coachId, // 分享链接
							    imgUrl: coach.Avator+"_large?time="+new Date().getTime(), // 分享图标
						        type: '', // 分享类型,music、video或link，不填默认为link
						        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
						        success: function (){ 
						            // $window.location.href="/yja/person";
						        },
						        cancel: function (){ 
						            // 用户取消分享后执行的回调函数
						        }
						    });
						})
					}else if(result && result.msg){
						var errorInfo=result.msg;
			 			alert(errorInfo);
			 		}
				})
			}else if(result && result.msg){
				var errorInfo=result.msg;
				alert(errorInfo);
			}else{
				alert("未知错误,请退出重试")
			}
		})
		$(".forCarIMG img").on("click",function(){
			var src=$(this).attr("src");
			$(".container-model").css("display","block");
			$("#body").css("display","none");
			$(".hideImage").attr("src",src);
			$(".hideImage").css("top",($(window).height() - $(".hideImage").height())/2);
		})
		$(".container-model").on("click",function(){
			$(".container-model").css("display","none");
			$("#body").css("display","block");
		})
	})
</script>
