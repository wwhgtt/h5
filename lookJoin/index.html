<!DOCTYPE>
<html>
	<head>
		<title></title>
		<meta charset="utf-8"/>
		<meta Content-Type="application/x-www-form-urlencoded" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
		<link rel="stylesheet" type="text/css" href="./css/style.css">
		<script src="./js/lib/zetpo.min.js"></script>
		<script src="./js/script/config.js"></script>
	</head>
	<body>
		<div class="container">
			<div class="header">
				<div class="logoImg">
					<img src="./img/car.png">
				</div>
				<div class="company">
					<p>用户数目查看</p>
				</div>
			</div>
			<div class="content">
				<div class="main" style="border-bottom:1px solid #4ab1ff">
					<span>姓名</span>
					<span>电话</span>
					<span>性别</span>
					<span>年龄</span>
					<span>地址</span>
					<span>职业</span>
				</div>
			</div>
		</div>
	</body>
</html>
<script type="text/javascript">
	$(document).ready(function(){
		var pagesize=5;
		var isLoad = false;
		var getItem=function(pageNum){
			isLoad=true;
			$.post(BASE_URL+"/enroll/inforecord/listinfo.do ",{
				pageNum:pageNum
			},function(result){
				var inforecords=result.inforecords;
				for(index in inforecords){
					var name=inforecords[index].rcdname,
						area=inforecords[index].area,
						phone=inforecords[index].phone,
						sex=inforecords[index].sex,
						age=inforecords[index].age,
						vocation=inforecords[index].vocation;
					if(index%2 == 0){
						var html='<div class="main odd">\
							<span>'+name+'</span>\
							<span>'+phone+'</span>\
							<span>'+sex+'</span>\
							<span>'+age+'</span>\
							<span>'+area+'</span>\
							<span>'+vocation+'</span>\
							</div>';
						$(".content").append(html);
					}else{
						var html='<div class="main even">\
							<span>'+name+'</span>\
							<span>'+phone+'</span>\
							<span>'+sex+'</span>\
							<span>'+age+'</span>\
							<span>'+area+'</span>\
							<span>'+vocation+'</span>\
							</div>';
						$(".content").append(html);
					}
				}
			})
		}
		getItem(1);
		$(".content").scroll(function(){
			var scrollHeight = $(this).scrollTop();
			var rankListCount = $(".main").length;
			var rankListHeight = $(".main").height();
			var rankListTotalHeight = rankListHeight * rankListCount;
			var rankDetailHeight = $(".content").height();
			var diffHeight = rankListTotalHeight - rankDetailHeight - scrollHeight;
			//可以加载新数据
			if(diffHeight >=0 && diffHeight < rankListHeight && isLoad == false){
				pageNum = Math.ceil(rankListCount / pageSize) + 1;
				getName(pageNum);
			}
		})
	})
</script>
